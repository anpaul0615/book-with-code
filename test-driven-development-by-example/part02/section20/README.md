# 20장 뒷정리하기


## 메모

> ..가끔은 setUp 에서 외부 자원을 할당하는 경우가 있다. 테스트가 계속 서로 독립적이길 바란다면 외부 자원을 할당받은 테스트들은 작업을 마치기 전에 tearDown 메서드 같은 곳에서 자원을 다시 반환할 필요가 있다.

> ..플래그를 사용하는 방식은 메서드의 중요한 면을 하나 놓치고 있다. 바로 setUp 은 메서드가 실행되기 전에 호출되어야 하고 tearDown 은 테스트 메서드가 실행된 후에 호출되어야 한다는 점이다.

> ..앞에서 두 번 사용한 것으로 인해 리팩토링했다가 이를 다시 되돌리는 일은 자주 있는 일이다. 어떤 사람들은 했던 일을 되돌리는 것을 싫어해서 중복이 서너 번 발생할 때까지 기다리기도 한다. 나는 내 사고 주기를 설계에 써버리는 것을 선호하기 때문에, 직후에 바로 취소하건 말건 걱정하지 않고 그냥 반사적으로 리팩토링한다.

> ..이젠 tearDown 을 구현할 준비가 됐다. 속았지? **이젠 tearDown 을 테스트할 준비가 됐다!**

> 플래그에서 로그로 테스트 전략을 구조조정했다.  
> 새로운 로그 기능을 이용하여 tearDown 을 테스트하고 구현했다.  
> 문제를 발견했는데 뒤로 돌아가는 대신 과감히 수정했다. (이게 잘한일일까?)  


## 코드실습

- [Step15 : 모델코드 수정 (WasRun.wasSetUp 플래그를 로그 기록으로 변경)](./step15.py)  
- [Step16 : 모델코드 수정 (WasRun.wasRun 플래그를 로그 기록으로 변경)](./step16.py)  
- [Step17 : 테스트코드 수정 (testRunning 테스트케이스 제거)](./step17.py)  
- [Step18 : 새로운 테스트케이스 추가 (WasRun.tearDown 메소드 추가)](./step18.py)  
- [Step19 : 모델코드 수정 (WasRun.tearDown 메소드 구현)](./step19.py)  

